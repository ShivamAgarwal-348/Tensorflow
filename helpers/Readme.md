helper functions for reference. Taken from ZTM
